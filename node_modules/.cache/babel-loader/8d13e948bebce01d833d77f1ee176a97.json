{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pdangi/intertrust/media/test-task-media/src/containers/Stocks.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PaperMain from '../components/PaperMain';\nimport { fetchStreams, updateStream } from '../api/streams';\nimport alert from '../utils/alert';\nimport loader from '../utils/loader';\n\nvar Streams =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Streams, _Component);\n\n  function Streams() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Streams);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Streams)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true\n    };\n    _this.fetchStreamsData =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var epasso, _this$state, page, pageSize, sortBy, search, sortString, res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              loader(true);\n\n              _this.setState({\n                loading: true\n              });\n\n              epasso = _this.props.cookies.epasso;\n              _this$state = _this.state, page = _this$state.page, pageSize = _this$state.pageSize, sortBy = _this$state.sortBy, search = _this$state.search;\n              sortString = sortBy[0].desc ? \"-\".concat(sortBy[0].id) : sortBy[0].id;\n              _context.next = 7;\n              return fetchStreams(epasso, page, pageSize, sortString, search);\n\n            case 7:\n              res = _context.sent;\n\n              _this.setState(_objectSpread({\n                loading: false\n              }, res), function () {\n                setInterval(function () {\n                  loader(false);\n                }, 2000);\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.onFetchData = function (state) {\n      var _this$state2 = _this.state,\n          pageSize = _this$state2.pageSize,\n          page = _this$state2.page,\n          sortBy = _this$state2.sortBy;\n\n      if (pageSize !== state.pageSize || page !== state.page || JSON.stringify(state.sorted) !== JSON.stringify(sortBy)) {\n        var size = state.pageSize < 0 ? 0 : state.pageSize;\n\n        _this.setState({\n          pageSize: size,\n          page: state.page,\n          sortBy: state.sorted\n        }, function () {\n          _this.fetchStreamsData();\n        });\n      }\n    };\n\n    _this.onSearch = function (event) {\n      var search = _this.state.search;\n      var value = event.target.value;\n\n      if (search !== value) {\n        _this.setState({\n          search: value\n        },\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return _this.fetchStreamsData();\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        })));\n      }\n    };\n\n    _this.onStatusChange = function (stream) {\n      var epasso = _this.props.cookies.epasso;\n      var id = stream.id,\n          status = stream.status;\n      alert({\n        title: 'Confirm',\n        text: \"Do you really want to \".concat(status ? 'disable' : 'enable', \" this stream?\"),\n        handleSuccess: function () {\n          var _handleSuccess = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee3() {\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    loader(true);\n                    _context3.next = 3;\n                    return updateStream(epasso, id, {\n                      status: !status\n                    });\n\n                  case 3:\n                    _this.fetchStreamsData();\n\n                    setInterval(function () {\n                      loader(false);\n                    }, 2000);\n\n                  case 5:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          function handleSuccess() {\n            return _handleSuccess.apply(this, arguments);\n          }\n\n          return handleSuccess;\n        }()\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Streams, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.fetchStreamsData();\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(PaperMain, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"hello\"));\n    }\n  }]);\n\n  return Streams;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps() {\n  return {};\n};\n\nvar mapDispatchToProps = function mapDispatchToProps() {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Streams);","map":{"version":3,"sources":["/Users/pdangi/intertrust/media/test-task-media/src/containers/Stocks.jsx"],"names":["React","Component","connect","PaperMain","fetchStreams","updateStream","alert","loader","Streams","state","loading","fetchStreamsData","setState","epasso","props","cookies","page","pageSize","sortBy","search","sortString","desc","id","res","setInterval","onFetchData","JSON","stringify","sorted","size","onSearch","event","value","target","onStatusChange","stream","status","title","text","handleSuccess","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport PaperMain from '../components/PaperMain';\nimport { fetchStreams, updateStream } from '../api/streams';\nimport alert from '../utils/alert';\nimport loader from '../utils/loader';\n\nclass Streams extends Component {\n  state = {\n    loading: true,\n  };\n\n  async componentWillMount() {\n    await this.fetchStreamsData();\n  }\n\n  fetchStreamsData = async () => {\n    loader(true);\n    this.setState({ loading: true });\n    const {\n      cookies: { epasso },\n    } = this.props;\n    const { page, pageSize, sortBy, search } = this.state;\n    const sortString = sortBy[0].desc ? `-${sortBy[0].id}` : sortBy[0].id;\n    const res = await fetchStreams(epasso, page, pageSize, sortString, search);\n    this.setState({ loading: false, ...res }, () => {\n      setInterval(() => {\n        loader(false);\n      }, 2000);\n    });\n  };\n\n  onFetchData = state => {\n    const { pageSize, page, sortBy } = this.state;\n    if (\n      pageSize !== state.pageSize ||\n      page !== state.page ||\n      JSON.stringify(state.sorted) !== JSON.stringify(sortBy)\n    ) {\n      const size = state.pageSize < 0 ? 0 : state.pageSize;\n      this.setState(\n        { pageSize: size, page: state.page, sortBy: state.sorted },\n        () => {\n          this.fetchStreamsData();\n        }\n      );\n    }\n  };\n\n  onSearch = event => {\n    const { search } = this.state;\n    const {\n      target: { value },\n    } = event;\n    if (search !== value) {\n      this.setState({ search: value }, async () => {\n        await this.fetchStreamsData();\n      });\n    }\n  };\n\n  onStatusChange = stream => {\n    const {\n      cookies: { epasso },\n    } = this.props;\n    const { id, status } = stream;\n    alert({\n      title: 'Confirm',\n      text: `Do you really want to ${\n        status ? 'disable' : 'enable'\n      } this stream?`,\n      handleSuccess: async () => {\n        loader(true);\n        await updateStream(epasso, id, { status: !status });\n        this.fetchStreamsData();\n        setInterval(() => {\n          loader(false);\n        }, 2000);\n      },\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <PaperMain>hello</PaperMain>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = () => ({});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Streams);\n"]},"metadata":{},"sourceType":"module"}