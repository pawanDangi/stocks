{"ast":null,"code":"import _classCallCheck from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pdangi/intertrust/media/test-task-media/src/components/line-chart/FullScreen.jsx\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Dialog } from '@material-ui/core';\nimport { Close } from '@material-ui/icons';\nimport * as d3 from 'd3';\nvar styles = {\n  dialog: {\n    maxWidth: 'none',\n    width: '100%',\n    margin: '5px',\n    height: '100%',\n    top: '24px',\n    padding: '5px'\n  },\n  lineChart: {\n    width: '100%',\n    height: '100%'\n  },\n  closeIcon: {\n    textAlign: 'right',\n    cursor: 'pointer'\n  },\n  line: {\n    fill: 'none',\n    stroke: 'steelblue',\n    strokeWidth: '1.5px',\n    width: '100%'\n  },\n  zoom: {\n    cursor: 'move',\n    fill: 'none',\n    pointerEvents: 'all'\n  }\n};\n\nvar FullScreen =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FullScreen, _React$Component);\n\n  function FullScreen() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FullScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FullScreen)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      svgWidth: 0,\n      svgHeight: 0,\n      margin: {\n        top: 20,\n        right: 20,\n        bottom: 110,\n        left: 40\n      },\n      margin2: {\n        top: 430,\n        right: 20,\n        bottom: 30,\n        left: 40\n      },\n      svg: null,\n      width: 0,\n      x: null,\n      x2: null,\n      xAxis: null,\n      brush: null,\n      zoom: null,\n      line: null,\n      lineChart: null,\n      focus: null,\n      context: null\n    };\n\n    _this.resize = function () {\n      var id = _this.props.id;\n\n      var _document$getElementB = document.getElementById(\"\".concat(id, \"-full-div\")),\n          offsetWidth = _document$getElementB.offsetWidth,\n          offsetHeight = _document$getElementB.offsetHeight;\n\n      var svgHeight = offsetHeight - 30;\n      var _this$state = _this.state,\n          margin = _this$state.margin,\n          margin2 = _this$state.margin2;\n      margin.bottom = svgHeight * 0.22;\n      margin2.top = svgHeight * 0.86;\n\n      _this.setState({\n        svgWidth: offsetWidth,\n        svgHeight: svgHeight,\n        margin: margin,\n        margin2: margin2\n      }, function () {\n        _this.createGraph();\n      });\n    };\n\n    _this.createGraph = function () {\n      var _this$props = _this.props,\n          id = _this$props.id,\n          title = _this$props.title;\n      var _this$state2 = _this.state,\n          svgWidth = _this$state2.svgWidth,\n          svgHeight = _this$state2.svgHeight,\n          margin = _this$state2.margin,\n          margin2 = _this$state2.margin2;\n      var svg = d3.select(\"#\".concat(id));\n      svg.selectAll('*').remove();\n      var width = svgWidth - margin.left - margin.right;\n      var height = svgHeight - margin.top - margin.bottom;\n      var height2 = svgHeight - margin2.top - margin2.bottom;\n      svg.append('g').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\")).append('text').attr('x', svgWidth / 2).attr('dy', 12).attr('text-anchor', 'middle').text(title);\n      var x = d3.scaleTime().range([0, width]);\n      var x2 = d3.scaleTime().range([0, width]);\n      var y = d3.scaleLinear().range([height, 0]);\n      var y2 = d3.scaleLinear().range([height2, 0]);\n      var xAxis = d3.axisBottom(x);\n      var xAxis2 = d3.axisBottom(x2);\n      var yAxis = d3.axisLeft(y);\n\n      _this.setState({\n        svg: svg,\n        width: width,\n        x: x,\n        x2: x2,\n        xAxis: xAxis\n      }, function () {\n        var brush = d3.brushX().extent([[0, 0], [width, height2]]).on('brush end', _this.brushed);\n        var zoom = d3.zoom().scaleExtent([1, Infinity]).translateExtent([[0, 0], [width, height]]).extent([[0, 0], [width, height]]).on('zoom', _this.zoomed);\n        var line = d3.line().x(function (d) {\n          return x(d.date);\n        }).y(function (d) {\n          return y(d.value);\n        });\n        var line2 = d3.line().x(function (d) {\n          return x2(d.date);\n        }).y(function (d) {\n          return y2(d.value);\n        });\n        svg.append('defs').append('svg:clipPath').attr('id', 'clip').append('svg:rect').attr('width', width).attr('height', height).attr('x', 0).attr('y', 0);\n        var lineChart = svg.append('g').attr('class', 'focus').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\")); // .attr('clip-path', 'url(#clip)');\n\n        var focus = svg.append('g').attr('class', 'focus').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n        var context = svg.append('g').attr('class', 'context').attr('transform', \"translate(\".concat(margin2.left, \",\").concat(margin2.top, \")\"));\n\n        _this.setState({\n          brush: brush,\n          zoom: zoom,\n          line: line,\n          lineChart: lineChart,\n          focus: focus,\n          context: context\n        }, function () {\n          var _this$props2 = _this.props,\n              data = _this$props2.data,\n              classes = _this$props2.classes;\n          x.domain(d3.extent(data, function (d) {\n            return d.date;\n          }));\n          y.domain([0, d3.max(data, function (d) {\n            return d.value;\n          })]);\n          x2.domain(x.domain());\n          y2.domain(y.domain());\n          focus.append('g').attr('class', 'axis axis--x').attr('transform', \"translate(0,\".concat(height, \")\")).call(xAxis);\n          focus.append('g').attr('class', 'axis axis--y').call(yAxis);\n          lineChart.append('path').datum(data).attr('class', classes.line).attr('d', line);\n          context.append('path').datum(data).attr('class', classes.line).attr('d', line2);\n          context.append('g').attr('class', 'axis axis--x').attr('transform', \"translate(0,\".concat(height2, \")\")).call(xAxis2);\n          context.append('g').attr('class', 'brush').call(brush).call(brush.move, x.range());\n          svg.append('rect').attr('class', classes.zoom).attr('width', width).attr('height', height).attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\")).call(zoom).on('mousewheel.zoom', null).on('DOMMouseScroll.zoom', null).on('wheel.zoom', null);\n        });\n      });\n    };\n\n    _this.brushed = function () {\n      var classes = _this.props.classes;\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'zoom') return;\n      var _this$state3 = _this.state,\n          x = _this$state3.x,\n          x2 = _this$state3.x2,\n          lineChart = _this$state3.lineChart,\n          line = _this$state3.line,\n          xAxis = _this$state3.xAxis,\n          focus = _this$state3.focus,\n          svg = _this$state3.svg,\n          zoom = _this$state3.zoom,\n          width = _this$state3.width;\n      var s = d3.event.selection || x2.range();\n      x.domain(s.map(x2.invert, x2));\n      lineChart.select(\".\".concat(classes.line)).attr('d', line);\n      focus.select('.axis--x').call(xAxis);\n      svg.select(\".\".concat(classes.zoom)).call(zoom.transform, d3.zoomIdentity.scale(width / (s[1] - s[0])).translate(-s[0], 0));\n    };\n\n    _this.zoomed = function () {\n      var classes = _this.props.classes;\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'brush') return; // ignore zoom-by-brush\n\n      var t = d3.event.transform;\n      var _this$state4 = _this.state,\n          x = _this$state4.x,\n          x2 = _this$state4.x2,\n          lineChart = _this$state4.lineChart,\n          line = _this$state4.line,\n          focus = _this$state4.focus,\n          xAxis = _this$state4.xAxis,\n          context = _this$state4.context,\n          brush = _this$state4.brush;\n      x.domain(t.rescaleX(x2).domain());\n      lineChart.select(\".\".concat(classes.line)).attr('d', line);\n      focus.select('.axis--x').call(xAxis);\n      context.select('.brush').call(brush.move, x.range().map(t.invertX, t));\n    };\n\n    _this.fullScreen = function () {\n      var fullScreen = _this.props.fullScreen;\n      fullScreen(false);\n    };\n\n    return _this;\n  }\n\n  _createClass(FullScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      window.addEventListener('resize', this.resize);\n      setTimeout(function () {\n        _this2.resize();\n      }, 200);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('resize', this.resize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          classes = _this$props3.classes,\n          id = _this$props3.id;\n      var svgHeight = this.state.svgHeight;\n      return React.createElement(Dialog, {\n        classes: {\n          paper: classes.dialog\n        },\n        open: true,\n        \"aria-labelledby\": \"simple-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"\".concat(id, \"-full-div\"),\n        className: classes.lineChart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.closeIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(Close, {\n        onClick: this.fullScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      })), React.createElement(\"svg\", {\n        id: id,\n        width: \"100%\",\n        height: svgHeight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return FullScreen;\n}(React.Component);\n\nexport default withStyles(styles)(FullScreen);","map":{"version":3,"sources":["/Users/pdangi/intertrust/media/test-task-media/src/components/line-chart/FullScreen.jsx"],"names":["React","withStyles","Dialog","Close","d3","styles","dialog","maxWidth","width","margin","height","top","padding","lineChart","closeIcon","textAlign","cursor","line","fill","stroke","strokeWidth","zoom","pointerEvents","FullScreen","state","svgWidth","svgHeight","right","bottom","left","margin2","svg","x","x2","xAxis","brush","focus","context","resize","id","props","document","getElementById","offsetWidth","offsetHeight","setState","createGraph","title","select","selectAll","remove","height2","append","attr","text","scaleTime","range","y","scaleLinear","y2","axisBottom","xAxis2","yAxis","axisLeft","brushX","extent","on","brushed","scaleExtent","Infinity","translateExtent","zoomed","d","date","value","line2","data","classes","domain","max","call","datum","move","event","sourceEvent","type","s","selection","map","invert","transform","zoomIdentity","scale","translate","t","rescaleX","invertX","fullScreen","window","addEventListener","setTimeout","removeEventListener","paper","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Dialog } from '@material-ui/core';\nimport { Close } from '@material-ui/icons';\nimport * as d3 from 'd3';\n\nconst styles = {\n  dialog: {\n    maxWidth: 'none',\n    width: '100%',\n    margin: '5px',\n    height: '100%',\n    top: '24px',\n    padding: '5px'\n  },\n  lineChart: {\n    width: '100%',\n    height: '100%'\n  },\n  closeIcon: {\n    textAlign: 'right',\n    cursor: 'pointer'\n  },\n  line: {\n    fill: 'none',\n    stroke: 'steelblue',\n    strokeWidth: '1.5px',\n    width: '100%'\n  },\n  zoom: {\n    cursor: 'move',\n    fill: 'none',\n    pointerEvents: 'all'\n  }\n};\n\nclass FullScreen extends React.Component {\n  state = {\n    svgWidth: 0,\n    svgHeight: 0,\n    margin: { top: 20, right: 20, bottom: 110, left: 40 },\n    margin2: { top: 430, right: 20, bottom: 30, left: 40 },\n    svg: null,\n    width: 0,\n    x: null,\n    x2: null,\n    xAxis: null,\n    brush: null,\n    zoom: null,\n    line: null,\n    lineChart: null,\n    focus: null,\n    context: null\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resize);\n    setTimeout(() => {\n      this.resize();\n    }, 200);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resize);\n  }\n\n  resize = () => {\n    const { id } = this.props;\n    const { offsetWidth, offsetHeight } = document.getElementById(\n      `${id}-full-div`\n    );\n    const svgHeight = offsetHeight - 30;\n    const { margin, margin2 } = this.state;\n    margin.bottom = svgHeight * 0.22;\n    margin2.top = svgHeight * 0.86;\n    this.setState({ svgWidth: offsetWidth, svgHeight, margin, margin2 }, () => {\n      this.createGraph();\n    });\n  };\n\n  createGraph = () => {\n    const { id, title } = this.props;\n    const { svgWidth, svgHeight, margin, margin2 } = this.state;\n\n    const svg = d3.select(`#${id}`);\n    svg.selectAll('*').remove();\n\n    const width = svgWidth - margin.left - margin.right;\n    const height = svgHeight - margin.top - margin.bottom;\n    const height2 = svgHeight - margin2.top - margin2.bottom;\n\n    svg\n      .append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`)\n      .append('text')\n      .attr('x', svgWidth / 2)\n      .attr('dy', 12)\n      .attr('text-anchor', 'middle')\n      .text(title);\n\n    const x = d3.scaleTime().range([0, width]);\n    const x2 = d3.scaleTime().range([0, width]);\n\n    const y = d3.scaleLinear().range([height, 0]);\n    const y2 = d3.scaleLinear().range([height2, 0]);\n\n    const xAxis = d3.axisBottom(x);\n    const xAxis2 = d3.axisBottom(x2);\n    const yAxis = d3.axisLeft(y);\n\n    this.setState({ svg, width, x, x2, xAxis }, () => {\n      const brush = d3\n        .brushX()\n        .extent([[0, 0], [width, height2]])\n        .on('brush end', this.brushed);\n\n      const zoom = d3\n        .zoom()\n        .scaleExtent([1, Infinity])\n        .translateExtent([[0, 0], [width, height]])\n        .extent([[0, 0], [width, height]])\n        .on('zoom', this.zoomed);\n\n      const line = d3\n        .line()\n        .x(d => x(d.date))\n        .y(d => y(d.value));\n\n      const line2 = d3\n        .line()\n        .x(d => x2(d.date))\n        .y(d => y2(d.value));\n\n      svg\n        .append('defs')\n        .append('svg:clipPath')\n        .attr('id', 'clip')\n        .append('svg:rect')\n        .attr('width', width)\n        .attr('height', height)\n        .attr('x', 0)\n        .attr('y', 0);\n\n      const lineChart = svg\n        .append('g')\n        .attr('class', 'focus')\n        .attr('transform', `translate(${margin.left},${margin.top})`);\n      // .attr('clip-path', 'url(#clip)');\n\n      const focus = svg\n        .append('g')\n        .attr('class', 'focus')\n        .attr('transform', `translate(${margin.left},${margin.top})`);\n\n      const context = svg\n        .append('g')\n        .attr('class', 'context')\n        .attr('transform', `translate(${margin2.left},${margin2.top})`);\n\n      this.setState({ brush, zoom, line, lineChart, focus, context }, () => {\n        const { data, classes } = this.props;\n        x.domain(d3.extent(data, d => d.date));\n        y.domain([0, d3.max(data, d => d.value)]);\n        x2.domain(x.domain());\n        y2.domain(y.domain());\n\n        focus\n          .append('g')\n          .attr('class', 'axis axis--x')\n          .attr('transform', `translate(0,${height})`)\n          .call(xAxis);\n\n        focus\n          .append('g')\n          .attr('class', 'axis axis--y')\n          .call(yAxis);\n\n        lineChart\n          .append('path')\n          .datum(data)\n          .attr('class', classes.line)\n          .attr('d', line);\n\n        context\n          .append('path')\n          .datum(data)\n          .attr('class', classes.line)\n          .attr('d', line2);\n\n        context\n          .append('g')\n          .attr('class', 'axis axis--x')\n          .attr('transform', `translate(0,${height2})`)\n          .call(xAxis2);\n\n        context\n          .append('g')\n          .attr('class', 'brush')\n          .call(brush)\n          .call(brush.move, x.range());\n\n        svg\n          .append('rect')\n          .attr('class', classes.zoom)\n          .attr('width', width)\n          .attr('height', height)\n          .attr('transform', `translate(${margin.left},${margin.top})`)\n          .call(zoom)\n          .on('mousewheel.zoom', null)\n          .on('DOMMouseScroll.zoom', null)\n          .on('wheel.zoom', null);\n      });\n    });\n  };\n\n  brushed = () => {\n    const { classes } = this.props;\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'zoom') return;\n    const {\n      x,\n      x2,\n      lineChart,\n      line,\n      xAxis,\n      focus,\n      svg,\n      zoom,\n      width\n    } = this.state;\n    const s = d3.event.selection || x2.range();\n    x.domain(s.map(x2.invert, x2));\n    lineChart.select(`.${classes.line}`).attr('d', line);\n    focus.select('.axis--x').call(xAxis);\n    svg\n      .select(`.${classes.zoom}`)\n      .call(\n        zoom.transform,\n        d3.zoomIdentity.scale(width / (s[1] - s[0])).translate(-s[0], 0)\n      );\n  };\n\n  zoomed = () => {\n    const { classes } = this.props;\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'brush') return; // ignore zoom-by-brush\n    const t = d3.event.transform;\n    const { x, x2, lineChart, line, focus, xAxis, context, brush } = this.state;\n    x.domain(t.rescaleX(x2).domain());\n    lineChart.select(`.${classes.line}`).attr('d', line);\n    focus.select('.axis--x').call(xAxis);\n    context.select('.brush').call(brush.move, x.range().map(t.invertX, t));\n  };\n\n  fullScreen = () => {\n    const { fullScreen } = this.props;\n    fullScreen(false);\n  };\n\n  render() {\n    const { classes, id } = this.props;\n    const { svgHeight } = this.state;\n    return (\n      <Dialog\n        classes={{ paper: classes.dialog }}\n        open\n        aria-labelledby=\"simple-dialog-title\"\n      >\n        <div id={`${id}-full-div`} className={classes.lineChart}>\n          <div className={classes.closeIcon}>\n            <Close onClick={this.fullScreen} />\n          </div>\n          <svg id={id} width=\"100%\" height={svgHeight} />\n        </div>\n      </Dialog>\n    );\n  }\n}\n\nexport default withStyles(styles)(FullScreen);\n"]},"metadata":{},"sourceType":"module"}