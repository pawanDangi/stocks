{"ast":null,"code":"import _classCallCheck from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/src/components/line-chart/CustomHeight.jsx\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { ZoomOutMap } from '@material-ui/icons';\nimport * as d3 from 'd3';\nvar styles = {\n  lineChart: {\n    width: '100%',\n    height: '100%'\n  },\n  zoomIcon: {\n    textAlign: 'right',\n    cursor: 'pointer'\n  },\n  line: {\n    fill: 'none',\n    stroke: 'steelblue',\n    strokeWidth: '1.5px'\n  },\n  zoom: {\n    cursor: 'move',\n    fill: 'none',\n    pointerEvents: 'all'\n  }\n};\n\nvar CustomHeight =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CustomHeight, _React$Component);\n\n  function CustomHeight() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CustomHeight);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CustomHeight)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      svgWidth: 0,\n      margin: {\n        top: 20,\n        right: 20,\n        bottom: 110,\n        left: 40\n      },\n      margin2: {\n        top: 430,\n        right: 20,\n        bottom: 30,\n        left: 40\n      },\n      svg: null,\n      width: 0,\n      x: null,\n      x2: null,\n      xAxis: null,\n      brush: null,\n      zoom: null,\n      line: null,\n      lineChart: null,\n      focus: null,\n      context: null\n    };\n\n    _this.resize = function () {\n      var id = _this.props.id;\n\n      var _document$getElementB = document.getElementById(\"\".concat(id, \"-div\")),\n          offsetWidth = _document$getElementB.offsetWidth;\n\n      _this.setState({\n        svgWidth: offsetWidth\n      }, function () {\n        _this.createGraph();\n      });\n    };\n\n    _this.createGraph = function () {\n      var _this$props = _this.props,\n          id = _this$props.id,\n          title = _this$props.title,\n          svgHeight = _this$props.svgHeight;\n      var _this$state = _this.state,\n          svgWidth = _this$state.svgWidth,\n          margin = _this$state.margin,\n          margin2 = _this$state.margin2;\n      var svg = d3.select(\"#\".concat(id));\n      svg.selectAll('*').remove();\n      var width = svgWidth - margin.left - margin.right;\n      var height = svgHeight - margin.top - margin.bottom;\n      var height2 = svgHeight - margin2.top - margin2.bottom;\n      svg.append('text').attr('x', svgWidth / 2).attr('dy', 10).attr('text-anchor', 'middle').text(title);\n      var x = d3.scaleTime().range([0, width]);\n      var x2 = d3.scaleTime().range([0, width]);\n      var y = d3.scaleLinear().range([height, 0]);\n      var y2 = d3.scaleLinear().range([height2, 0]);\n      var xAxis = d3.axisBottom(x);\n      var xAxis2 = d3.axisBottom(x2);\n      var yAxis = d3.axisLeft(y);\n\n      _this.setState({\n        svg: svg,\n        width: width,\n        x: x,\n        x2: x2,\n        xAxis: xAxis\n      }, function () {\n        var brush = d3.brushX().extent([[0, 0], [width, height2]]).on('brush end', _this.brushed);\n        var zoom = d3.zoom().scaleExtent([1, Infinity]).translateExtent([[0, 0], [width, height]]).extent([[0, 0], [width, height]]).on('zoom', _this.zoomed);\n        var line = d3.line().x(function (d) {\n          return x(d.date);\n        }).y(function (d) {\n          return y(d.value);\n        });\n        var line2 = d3.line().x(function (d) {\n          return x2(d.date);\n        }).y(function (d) {\n          return y2(d.value);\n        });\n        svg.append('defs').append('svg:clipPath').attr('id', 'clip').append('svg:rect').attr('width', width).attr('height', height).attr('x', 0).attr('y', 0);\n        var lineChart = svg.append('g').attr('class', 'focus').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\")).attr('clip-path', 'url(#clip)');\n        var focus = svg.append('g').attr('class', 'focus').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n        var context = svg.append('g').attr('class', 'context').attr('transform', \"translate(\".concat(margin2.left, \",\").concat(margin2.top, \")\"));\n\n        _this.setState({\n          brush: brush,\n          zoom: zoom,\n          line: line,\n          lineChart: lineChart,\n          focus: focus,\n          context: context\n        }, function () {\n          var _this$props2 = _this.props,\n              data = _this$props2.data,\n              classes = _this$props2.classes;\n          x.domain(d3.extent(data, function (d) {\n            return d.date;\n          }));\n          y.domain([0, d3.max(data, function (d) {\n            return d.value;\n          })]);\n          x2.domain(x.domain());\n          y2.domain(y.domain());\n          focus.append('g').attr('class', 'axis axis--x').attr('transform', \"translate(0,\".concat(height, \")\")).call(xAxis);\n          focus.append('g').attr('class', 'axis axis--y').call(yAxis);\n          lineChart.append('path').datum(data).attr('class', classes.line).attr('d', line);\n          context.append('path').datum(data).attr('class', classes.line).attr('d', line2);\n          context.append('g').attr('class', 'axis axis--x').attr('transform', \"translate(0,\".concat(height2, \")\")).call(xAxis2);\n          context.append('g').attr('class', 'brush').call(brush).call(brush.move, x.range());\n          svg.append('rect').attr('class', classes.zoom).attr('width', width).attr('height', height).attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\")).call(zoom).on('mousewheel.zoom', null).on('DOMMouseScroll.zoom', null).on('wheel.zoom', null);\n        });\n      });\n    };\n\n    _this.brushed = function () {\n      var classes = _this.props.classes;\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'zoom') return;\n      var _this$state2 = _this.state,\n          x = _this$state2.x,\n          x2 = _this$state2.x2,\n          lineChart = _this$state2.lineChart,\n          line = _this$state2.line,\n          xAxis = _this$state2.xAxis,\n          focus = _this$state2.focus,\n          svg = _this$state2.svg,\n          zoom = _this$state2.zoom,\n          width = _this$state2.width;\n      var s = d3.event.selection || x2.range();\n      x.domain(s.map(x2.invert, x2));\n      lineChart.select(\".\".concat(classes.line)).attr('d', line);\n      focus.select('.axis--x').call(xAxis);\n      svg.select(\".\".concat(classes.zoom)).call(zoom.transform, d3.zoomIdentity.scale(width / (s[1] - s[0])).translate(-s[0], 0));\n    };\n\n    _this.zoomed = function () {\n      var classes = _this.props.classes;\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'brush') return; // ignore zoom-by-brush\n\n      var t = d3.event.transform;\n      var _this$state3 = _this.state,\n          x = _this$state3.x,\n          x2 = _this$state3.x2,\n          lineChart = _this$state3.lineChart,\n          line = _this$state3.line,\n          focus = _this$state3.focus,\n          xAxis = _this$state3.xAxis,\n          context = _this$state3.context,\n          brush = _this$state3.brush;\n      x.domain(t.rescaleX(x2).domain());\n      lineChart.select(\".\".concat(classes.line)).attr('d', line);\n      focus.select('.axis--x').call(xAxis);\n      context.select('.brush').call(brush.move, x.range().map(t.invertX, t));\n    };\n\n    _this.fullScreen = function () {\n      var fullScreen = _this.props.fullScreen;\n      fullScreen(true);\n    };\n\n    return _this;\n  }\n\n  _createClass(CustomHeight, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      window.addEventListener('resize', this.resize);\n      var _this$state4 = this.state,\n          margin = _this$state4.margin,\n          margin2 = _this$state4.margin2;\n      var svgHeight = this.props.svgHeight;\n      margin.bottom = svgHeight * 0.22;\n      margin2.top = svgHeight * 0.86;\n      this.setState({\n        margin: margin,\n        margin2: margin2\n      }, function () {\n        _this2.resize();\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('resize', this.resize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          isFullScreenView = _this$props3.isFullScreenView,\n          id = _this$props3.id,\n          svgHeight = _this$props3.svgHeight,\n          classes = _this$props3.classes;\n      return React.createElement(\"div\", {\n        id: \"\".concat(id, \"-div\"),\n        className: classes.lineChart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.zoomIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, isFullScreenView ? React.createElement(ZoomOutMap, {\n        onClick: this.fullScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }) : ''), React.createElement(\"svg\", {\n        id: id,\n        width: \"100%\",\n        height: svgHeight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CustomHeight;\n}(React.Component);\n\nexport default withStyles(styles)(CustomHeight);","map":{"version":3,"sources":["/Users/pdangi/intertrust/ssai/epa-ui-api/client/src/components/line-chart/CustomHeight.jsx"],"names":["React","withStyles","ZoomOutMap","d3","styles","lineChart","width","height","zoomIcon","textAlign","cursor","line","fill","stroke","strokeWidth","zoom","pointerEvents","CustomHeight","state","svgWidth","margin","top","right","bottom","left","margin2","svg","x","x2","xAxis","brush","focus","context","resize","id","props","document","getElementById","offsetWidth","setState","createGraph","title","svgHeight","select","selectAll","remove","height2","append","attr","text","scaleTime","range","y","scaleLinear","y2","axisBottom","xAxis2","yAxis","axisLeft","brushX","extent","on","brushed","scaleExtent","Infinity","translateExtent","zoomed","d","date","value","line2","data","classes","domain","max","call","datum","move","event","sourceEvent","type","s","selection","map","invert","transform","zoomIdentity","scale","translate","t","rescaleX","invertX","fullScreen","window","addEventListener","removeEventListener","isFullScreenView","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { ZoomOutMap } from '@material-ui/icons';\nimport * as d3 from 'd3';\n\nconst styles = {\n  lineChart: {\n    width: '100%',\n    height: '100%'\n  },\n  zoomIcon: {\n    textAlign: 'right',\n    cursor: 'pointer'\n  },\n  line: {\n    fill: 'none',\n    stroke: 'steelblue',\n    strokeWidth: '1.5px'\n  },\n  zoom: {\n    cursor: 'move',\n    fill: 'none',\n    pointerEvents: 'all'\n  }\n};\n\nclass CustomHeight extends React.Component {\n  state = {\n    svgWidth: 0,\n    margin: { top: 20, right: 20, bottom: 110, left: 40 },\n    margin2: { top: 430, right: 20, bottom: 30, left: 40 },\n    svg: null,\n    width: 0,\n    x: null,\n    x2: null,\n    xAxis: null,\n    brush: null,\n    zoom: null,\n    line: null,\n    lineChart: null,\n    focus: null,\n    context: null\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resize);\n    const { margin, margin2 } = this.state;\n    const { svgHeight } = this.props;\n    margin.bottom = svgHeight * 0.22;\n    margin2.top = svgHeight * 0.86;\n    this.setState({ margin, margin2 }, () => {\n      this.resize();\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resize);\n  }\n\n  resize = () => {\n    const { id } = this.props;\n    const { offsetWidth } = document.getElementById(`${id}-div`);\n    this.setState({ svgWidth: offsetWidth }, () => {\n      this.createGraph();\n    });\n  };\n\n  createGraph = () => {\n    const { id, title, svgHeight } = this.props;\n    const { svgWidth, margin, margin2 } = this.state;\n\n    const svg = d3.select(`#${id}`);\n    svg.selectAll('*').remove();\n\n    const width = svgWidth - margin.left - margin.right;\n    const height = svgHeight - margin.top - margin.bottom;\n    const height2 = svgHeight - margin2.top - margin2.bottom;\n\n    svg\n      .append('text')\n      .attr('x', svgWidth / 2)\n      .attr('dy', 10)\n      .attr('text-anchor', 'middle')\n      .text(title);\n\n    const x = d3.scaleTime().range([0, width]);\n    const x2 = d3.scaleTime().range([0, width]);\n\n    const y = d3.scaleLinear().range([height, 0]);\n    const y2 = d3.scaleLinear().range([height2, 0]);\n\n    const xAxis = d3.axisBottom(x);\n    const xAxis2 = d3.axisBottom(x2);\n    const yAxis = d3.axisLeft(y);\n\n    this.setState({ svg, width, x, x2, xAxis }, () => {\n      const brush = d3\n        .brushX()\n        .extent([[0, 0], [width, height2]])\n        .on('brush end', this.brushed);\n\n      const zoom = d3\n        .zoom()\n        .scaleExtent([1, Infinity])\n        .translateExtent([[0, 0], [width, height]])\n        .extent([[0, 0], [width, height]])\n        .on('zoom', this.zoomed);\n\n      const line = d3\n        .line()\n        .x(d => x(d.date))\n        .y(d => y(d.value));\n\n      const line2 = d3\n        .line()\n        .x(d => x2(d.date))\n        .y(d => y2(d.value));\n\n      svg\n        .append('defs')\n        .append('svg:clipPath')\n        .attr('id', 'clip')\n        .append('svg:rect')\n        .attr('width', width)\n        .attr('height', height)\n        .attr('x', 0)\n        .attr('y', 0);\n\n      const lineChart = svg\n        .append('g')\n        .attr('class', 'focus')\n        .attr('transform', `translate(${margin.left},${margin.top})`)\n        .attr('clip-path', 'url(#clip)');\n\n      const focus = svg\n        .append('g')\n        .attr('class', 'focus')\n        .attr('transform', `translate(${margin.left},${margin.top})`);\n\n      const context = svg\n        .append('g')\n        .attr('class', 'context')\n        .attr('transform', `translate(${margin2.left},${margin2.top})`);\n\n      this.setState({ brush, zoom, line, lineChart, focus, context }, () => {\n        const { data, classes } = this.props;\n        x.domain(d3.extent(data, d => d.date));\n        y.domain([0, d3.max(data, d => d.value)]);\n        x2.domain(x.domain());\n        y2.domain(y.domain());\n\n        focus\n          .append('g')\n          .attr('class', 'axis axis--x')\n          .attr('transform', `translate(0,${height})`)\n          .call(xAxis);\n\n        focus\n          .append('g')\n          .attr('class', 'axis axis--y')\n          .call(yAxis);\n\n        lineChart\n          .append('path')\n          .datum(data)\n          .attr('class', classes.line)\n          .attr('d', line);\n\n        context\n          .append('path')\n          .datum(data)\n          .attr('class', classes.line)\n          .attr('d', line2);\n\n        context\n          .append('g')\n          .attr('class', 'axis axis--x')\n          .attr('transform', `translate(0,${height2})`)\n          .call(xAxis2);\n\n        context\n          .append('g')\n          .attr('class', 'brush')\n          .call(brush)\n          .call(brush.move, x.range());\n\n        svg\n          .append('rect')\n          .attr('class', classes.zoom)\n          .attr('width', width)\n          .attr('height', height)\n          .attr('transform', `translate(${margin.left},${margin.top})`)\n          .call(zoom)\n          .on('mousewheel.zoom', null)\n          .on('DOMMouseScroll.zoom', null)\n          .on('wheel.zoom', null);\n      });\n    });\n  };\n\n  brushed = () => {\n    const { classes } = this.props;\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'zoom') return;\n    const {\n      x,\n      x2,\n      lineChart,\n      line,\n      xAxis,\n      focus,\n      svg,\n      zoom,\n      width\n    } = this.state;\n    const s = d3.event.selection || x2.range();\n    x.domain(s.map(x2.invert, x2));\n    lineChart.select(`.${classes.line}`).attr('d', line);\n    focus.select('.axis--x').call(xAxis);\n    svg\n      .select(`.${classes.zoom}`)\n      .call(\n        zoom.transform,\n        d3.zoomIdentity.scale(width / (s[1] - s[0])).translate(-s[0], 0)\n      );\n  };\n\n  zoomed = () => {\n    const { classes } = this.props;\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'brush') return; // ignore zoom-by-brush\n    const t = d3.event.transform;\n    const { x, x2, lineChart, line, focus, xAxis, context, brush } = this.state;\n    x.domain(t.rescaleX(x2).domain());\n    lineChart.select(`.${classes.line}`).attr('d', line);\n    focus.select('.axis--x').call(xAxis);\n    context.select('.brush').call(brush.move, x.range().map(t.invertX, t));\n  };\n\n  fullScreen = () => {\n    const { fullScreen } = this.props;\n    fullScreen(true);\n  };\n\n  render() {\n    const { isFullScreenView, id, svgHeight, classes } = this.props;\n    return (\n      <div id={`${id}-div`} className={classes.lineChart}>\n        <div className={classes.zoomIcon}>\n          {isFullScreenView ? <ZoomOutMap onClick={this.fullScreen} /> : ''}\n        </div>\n        <svg id={id} width=\"100%\" height={svgHeight} />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(CustomHeight);\n"]},"metadata":{},"sourceType":"module"}