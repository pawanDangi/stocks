{"ast":null,"code":"import _defineProperty from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pdangi/intertrust/ssai/epa-ui-api/client/src/components/streams/SlotMarkupForm.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Typography, Grid, TextField, Button } from '@material-ui/core/';\nimport { Add as AddIcon } from '@material-ui/icons/';\nimport { Clear as ClearIcon } from '@material-ui/icons/';\nimport { reduce } from 'lodash';\nimport snackbar from '../../utils/snackbar';\nimport { primary, error } from '../../utils/colors';\n\nvar styles = function styles(theme) {\n  return {\n    grid: {\n      paddingTop: '5px !important',\n      paddingBottom: '5px !important',\n      display: 'flex',\n      alignItems: 'center',\n      '& div': {\n        background: 'none'\n      }\n    },\n    addMarker: {\n      background: primary.main,\n      color: primary.contrastText,\n      '&:hover': {\n        background: primary.dark\n      },\n      '&:focus': {\n        textDecoration: 'none',\n        outline: 'none'\n      }\n    },\n    removeMarker: {\n      background: error.main,\n      color: error.contrastText,\n      '&:hover': {\n        background: error.dark\n      },\n      '&:focus': {\n        textDecoration: 'none',\n        outline: 'none'\n      }\n    },\n    timeInput: {\n      width: '50%',\n      marginRight: '5px'\n    },\n    timeTxt: {\n      paddingRight: '5px'\n    }\n  };\n};\n\nvar SlotMarkupForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SlotMarkupForm, _Component);\n\n  function SlotMarkupForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SlotMarkupForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SlotMarkupForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      adSlotsMili: [],\n      min: '',\n      sec: '',\n      duration: ''\n    };\n\n    _this.handleChange = function (key) {\n      return function (e) {\n        return _this.setState(_defineProperty({}, key, Number(e.target.value) || 0));\n      };\n    };\n\n    _this.addAdSlotMili = function () {\n      var _this$state = _this.state,\n          min = _this$state.min,\n          sec = _this$state.sec,\n          duration = _this$state.duration;\n\n      if (!min && !sec || !duration) {\n        snackbar({\n          variant: 'error',\n          message: \"\".concat(!min && !sec ? 'Please provide ad start time' : 'Please provide ad duration')\n        });\n        return;\n      }\n\n      var adSlotsMili = _this.state.adSlotsMili;\n      var start = (min * 60 + sec) * 1000;\n      adSlotsMili = reduce(adSlotsMili, function (result, s) {\n        if (!(s.start === start)) {\n          result.push(s);\n          return result;\n        }\n\n        return result;\n      }, []);\n      adSlotsMili.push({\n        start: start,\n        duration: duration * 1000\n      });\n\n      _this.setState({\n        adSlotsMili: adSlotsMili\n      }, function () {\n        var setMarkupValue = _this.props.setMarkupValue;\n        setMarkupValue({\n          adSlotsMili: adSlotsMili\n        });\n      });\n    };\n\n    _this.getMinutes = function (miliSec) {\n      return Math.floor(miliSec / 1000 / 60);\n    };\n\n    _this.getSeconds = function (miliSec) {\n      var sec = miliSec / 1000;\n      return sec - Math.floor(sec / 60) * 60;\n    };\n\n    _this.removeMarker = function (start) {\n      var adSlotsMili = _this.state.adSlotsMili;\n      adSlotsMili = reduce(adSlotsMili, function (result, s) {\n        if (!(s.start === start)) {\n          result.push(s);\n          return result;\n        }\n\n        return result;\n      }, []);\n\n      _this.setState({\n        adSlotsMili: adSlotsMili\n      }, function () {\n        var setMarkupValue = _this.props.setMarkupValue;\n        setMarkupValue({\n          adSlotsMili: adSlotsMili\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SlotMarkupForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var _this$state2 = this.state,\n          min = _this$state2.min,\n          sec = _this$state2.sec,\n          duration = _this$state2.duration,\n          adSlotsMili = _this$state2.adSlotsMili;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 10,\n        className: classes.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 7,\n        md: 8,\n        className: classes.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.timeTxt,\n        variant: \"subheading\",\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Start\"), React.createElement(TextField, {\n        id: \"ep-markers-start-min-input\",\n        variant: \"outlined\",\n        fullWidth: true,\n        className: classes.timeInput,\n        label: \"min\",\n        type: \"number\",\n        margin: \"dense\",\n        value: min,\n        onChange: this.handleChange('min'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"ep-markers-start-sec-input\",\n        variant: \"outlined\",\n        fullWidth: true,\n        className: classes.timeInput,\n        label: \"sec\",\n        type: \"number\",\n        margin: \"dense\",\n        value: sec,\n        onChange: this.handleChange('sec'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 5,\n        md: 4,\n        className: classes.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.timeTxt,\n        variant: \"subheading\",\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Duration\"), React.createElement(TextField, {\n        id: \"ep-markers-duration-sec-input\",\n        variant: \"outlined\",\n        fullWidth: true,\n        className: classes.timeInput,\n        type: \"number\",\n        label: \"sec\",\n        margin: \"dense\",\n        value: duration,\n        onChange: this.handleChange('duration'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })))), React.createElement(Grid, {\n        item: true,\n        xs: 2,\n        className: classes.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"small\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        className: classes.addMarker,\n        onClick: this.addAdSlotMili,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(AddIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }))), adSlotsMili.map(function (s, i) {\n        return React.createElement(React.Fragment, {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          xs: 10,\n          className: classes.grid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          container: true,\n          spacing: 8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          xs: 7,\n          md: 8,\n          className: classes.grid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          className: classes.timeTxt,\n          variant: \"subheading\",\n          component: \"p\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, \"Start\"), React.createElement(TextField, {\n          disabled: true,\n          id: \"ep-markers-start-min-show\",\n          variant: \"outlined\",\n          fullWidth: true,\n          className: classes.timeInput,\n          label: \"min\",\n          type: \"number\",\n          margin: \"dense\",\n          value: _this2.getMinutes(s.start),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }), React.createElement(TextField, {\n          disabled: true,\n          id: \"ep-markers-start-sec-show\",\n          variant: \"outlined\",\n          fullWidth: true,\n          className: classes.timeInput,\n          label: \"sec\",\n          type: \"number\",\n          margin: \"dense\",\n          value: _this2.getSeconds(s.start),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        })), React.createElement(Grid, {\n          item: true,\n          xs: 5,\n          md: 4,\n          className: classes.grid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          className: classes.timeTxt,\n          variant: \"subheading\",\n          component: \"p\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          },\n          __self: this\n        }, \"Duration\"), React.createElement(TextField, {\n          disabled: true,\n          id: \"ep-markers-duration-sec-show\",\n          variant: \"outlined\",\n          fullWidth: true,\n          className: classes.timeInput,\n          type: \"number\",\n          label: \"sec\",\n          margin: \"dense\",\n          value: s.duration / 1000,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        })))), React.createElement(Grid, {\n          item: true,\n          xs: 2,\n          className: classes.grid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, React.createElement(Button, {\n          size: \"small\",\n          color: \"primary\",\n          \"aria-label\": \"Add\",\n          className: classes.removeMarker,\n          onClick: function onClick() {\n            return _this2.removeMarker(s.start);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, React.createElement(ClearIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }))));\n      }));\n    }\n  }]);\n\n  return SlotMarkupForm;\n}(Component);\n\nSlotMarkupForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  setMarkupValue: PropTypes.func.isRequired\n};\nexport default withStyles(styles)(SlotMarkupForm);","map":{"version":3,"sources":["/Users/pdangi/intertrust/ssai/epa-ui-api/client/src/components/streams/SlotMarkupForm.jsx"],"names":["React","Component","PropTypes","withStyles","Typography","Grid","TextField","Button","Add","AddIcon","Clear","ClearIcon","reduce","snackbar","primary","error","styles","theme","grid","paddingTop","paddingBottom","display","alignItems","background","addMarker","main","color","contrastText","dark","textDecoration","outline","removeMarker","timeInput","width","marginRight","timeTxt","paddingRight","SlotMarkupForm","state","adSlotsMili","min","sec","duration","handleChange","key","e","setState","Number","target","value","addAdSlotMili","variant","message","start","result","s","push","setMarkupValue","props","getMinutes","miliSec","Math","floor","getSeconds","classes","map","i","propTypes","object","isRequired","func"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,UAAT,EAAqBC,IAArB,EAA2BC,SAA3B,EAAsCC,MAAtC,QAAoD,oBAApD;AACA,SAASC,GAAG,IAAIC,OAAhB,QAA+B,qBAA/B;AACA,SAASC,KAAK,IAAIC,SAAlB,QAAmC,qBAAnC;AACA,SAASC,MAAT,QAAuB,QAAvB;AAEA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,OAAT,EAAkBC,KAAlB,QAA+B,oBAA/B;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACvBC,IAAAA,IAAI,EAAE;AACJC,MAAAA,UAAU,EAAE,gBADR;AAEJC,MAAAA,aAAa,EAAE,gBAFX;AAGJC,MAAAA,OAAO,EAAE,MAHL;AAIJC,MAAAA,UAAU,EAAE,QAJR;AAKJ,eAAS;AACPC,QAAAA,UAAU,EAAE;AADL;AALL,KADiB;AAUvBC,IAAAA,SAAS,EAAE;AACTD,MAAAA,UAAU,EAAET,OAAO,CAACW,IADX;AAETC,MAAAA,KAAK,EAAEZ,OAAO,CAACa,YAFN;AAGT,iBAAW;AACTJ,QAAAA,UAAU,EAAET,OAAO,CAACc;AADX,OAHF;AAMT,iBAAW;AACTC,QAAAA,cAAc,EAAE,MADP;AAETC,QAAAA,OAAO,EAAE;AAFA;AANF,KAVY;AAqBvBC,IAAAA,YAAY,EAAE;AACZR,MAAAA,UAAU,EAAER,KAAK,CAACU,IADN;AAEZC,MAAAA,KAAK,EAAEX,KAAK,CAACY,YAFD;AAGZ,iBAAW;AACTJ,QAAAA,UAAU,EAAER,KAAK,CAACa;AADT,OAHC;AAMZ,iBAAW;AACTC,QAAAA,cAAc,EAAE,MADP;AAETC,QAAAA,OAAO,EAAE;AAFA;AANC,KArBS;AAgCvBE,IAAAA,SAAS,EAAE;AACTC,MAAAA,KAAK,EAAE,KADE;AAETC,MAAAA,WAAW,EAAE;AAFJ,KAhCY;AAoCvBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,YAAY,EAAE;AADP;AApCc,GAAL;AAAA,CAApB;;IAyCMC,c;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,WAAW,EAAE,EADP;AAENC,MAAAA,GAAG,EAAE,EAFC;AAGNC,MAAAA,GAAG,EAAE,EAHC;AAINC,MAAAA,QAAQ,EAAE;AAJJ,K;;UAORC,Y,GAAe,UAAAC,GAAG;AAAA,aAAI,UAAAC,CAAC;AAAA,eACrB,MAAKC,QAAL,qBAAiBF,GAAjB,EAAuBG,MAAM,CAACF,CAAC,CAACG,MAAF,CAASC,KAAV,CAAN,IAA0B,CAAjD,EADqB;AAAA,OAAL;AAAA,K;;UAGlBC,a,GAAgB,YAAM;AAAA,wBACW,MAAKZ,KADhB;AAAA,UACZE,GADY,eACZA,GADY;AAAA,UACPC,GADO,eACPA,GADO;AAAA,UACFC,QADE,eACFA,QADE;;AAEpB,UAAK,CAACF,GAAD,IAAQ,CAACC,GAAV,IAAkB,CAACC,QAAvB,EAAiC;AAC/B7B,QAAAA,QAAQ,CAAC;AACPsC,UAAAA,OAAO,EAAE,OADF;AAEPC,UAAAA,OAAO,YACL,CAACZ,GAAD,IAAQ,CAACC,GAAT,GACI,8BADJ,GAEI,4BAHC;AAFA,SAAD,CAAR;AAQA;AACD;;AAZmB,UAadF,WAbc,GAaE,MAAKD,KAbP,CAadC,WAbc;AAcpB,UAAMc,KAAK,GAAG,CAACb,GAAG,GAAG,EAAN,GAAWC,GAAZ,IAAmB,IAAjC;AAEAF,MAAAA,WAAW,GAAG3B,MAAM,CAClB2B,WADkB,EAElB,UAACe,MAAD,EAASC,CAAT,EAAe;AACb,YAAI,EAAEA,CAAC,CAACF,KAAF,KAAYA,KAAd,CAAJ,EAA0B;AACxBC,UAAAA,MAAM,CAACE,IAAP,CAAYD,CAAZ;AACA,iBAAOD,MAAP;AACD;;AACD,eAAOA,MAAP;AACD,OARiB,EASlB,EATkB,CAApB;AAYAf,MAAAA,WAAW,CAACiB,IAAZ,CAAiB;AAAEH,QAAAA,KAAK,EAALA,KAAF;AAASX,QAAAA,QAAQ,EAAEA,QAAQ,GAAG;AAA9B,OAAjB;;AACA,YAAKI,QAAL,CAAc;AAAEP,QAAAA,WAAW,EAAXA;AAAF,OAAd,EAA+B,YAAM;AAAA,YAC3BkB,cAD2B,GACR,MAAKC,KADG,CAC3BD,cAD2B;AAEnCA,QAAAA,cAAc,CAAC;AAAElB,UAAAA,WAAW,EAAXA;AAAF,SAAD,CAAd;AACD,OAHD;AAID,K;;UAEDoB,U,GAAa,UAAAC,OAAO;AAAA,aAAIC,IAAI,CAACC,KAAL,CAAWF,OAAO,GAAG,IAAV,GAAiB,EAA5B,CAAJ;AAAA,K;;UAEpBG,U,GAAa,UAAAH,OAAO,EAAI;AACtB,UAAMnB,GAAG,GAAGmB,OAAO,GAAG,IAAtB;AACA,aAAOnB,GAAG,GAAGoB,IAAI,CAACC,KAAL,CAAWrB,GAAG,GAAG,EAAjB,IAAuB,EAApC;AACD,K;;UAEDV,Y,GAAe,UAAAsB,KAAK,EAAI;AAAA,UAChBd,WADgB,GACA,MAAKD,KADL,CAChBC,WADgB;AAEtBA,MAAAA,WAAW,GAAG3B,MAAM,CAClB2B,WADkB,EAElB,UAACe,MAAD,EAASC,CAAT,EAAe;AACb,YAAI,EAAEA,CAAC,CAACF,KAAF,KAAYA,KAAd,CAAJ,EAA0B;AACxBC,UAAAA,MAAM,CAACE,IAAP,CAAYD,CAAZ;AACA,iBAAOD,MAAP;AACD;;AACD,eAAOA,MAAP;AACD,OARiB,EASlB,EATkB,CAApB;;AAWA,YAAKR,QAAL,CAAc;AAAEP,QAAAA,WAAW,EAAXA;AAAF,OAAd,EAA+B,YAAM;AAAA,YAC3BkB,cAD2B,GACR,MAAKC,KADG,CAC3BD,cAD2B;AAEnCA,QAAAA,cAAc,CAAC;AAAElB,UAAAA,WAAW,EAAXA;AAAF,SAAD,CAAd;AACD,OAHD;AAID,K;;;;;;;6BAEQ;AAAA;;AAAA,UACCyB,OADD,GACa,KAAKN,KADlB,CACCM,OADD;AAAA,yBAEqC,KAAK1B,KAF1C;AAAA,UAECE,GAFD,gBAECA,GAFD;AAAA,UAEMC,GAFN,gBAEMA,GAFN;AAAA,UAEWC,QAFX,gBAEWA,QAFX;AAAA,UAEqBH,WAFrB,gBAEqBA,WAFrB;AAGP,aACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAmB,QAAA,SAAS,EAAEyB,OAAO,CAAC9C,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAgB,QAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAkB,QAAA,EAAE,EAAE,CAAtB;AAAyB,QAAA,SAAS,EAAE8C,OAAO,CAAC9C,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AACE,QAAA,SAAS,EAAE8C,OAAO,CAAC7B,OADrB;AAEE,QAAA,OAAO,EAAC,YAFV;AAGE,QAAA,SAAS,EAAC,GAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAQE,oBAAC,SAAD;AACE,QAAA,EAAE,EAAC,4BADL;AAEE,QAAA,OAAO,EAAC,UAFV;AAGE,QAAA,SAAS,MAHX;AAIE,QAAA,SAAS,EAAE6B,OAAO,CAAChC,SAJrB;AAKE,QAAA,KAAK,EAAC,KALR;AAME,QAAA,IAAI,EAAC,QANP;AAOE,QAAA,MAAM,EAAC,OAPT;AAQE,QAAA,KAAK,EAAEQ,GART;AASE,QAAA,QAAQ,EAAE,KAAKG,YAAL,CAAkB,KAAlB,CATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EAmBE,oBAAC,SAAD;AACE,QAAA,EAAE,EAAC,4BADL;AAEE,QAAA,OAAO,EAAC,UAFV;AAGE,QAAA,SAAS,MAHX;AAIE,QAAA,SAAS,EAAEqB,OAAO,CAAChC,SAJrB;AAKE,QAAA,KAAK,EAAC,KALR;AAME,QAAA,IAAI,EAAC,QANP;AAOE,QAAA,MAAM,EAAC,OAPT;AAQE,QAAA,KAAK,EAAES,GART;AASE,QAAA,QAAQ,EAAE,KAAKE,YAAL,CAAkB,KAAlB,CATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnBF,CADF,EAgCE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAkB,QAAA,EAAE,EAAE,CAAtB;AAAyB,QAAA,SAAS,EAAEqB,OAAO,CAAC9C,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AACE,QAAA,SAAS,EAAE8C,OAAO,CAAC7B,OADrB;AAEE,QAAA,OAAO,EAAC,YAFV;AAGE,QAAA,SAAS,EAAC,GAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAQE,oBAAC,SAAD;AACE,QAAA,EAAE,EAAC,+BADL;AAEE,QAAA,OAAO,EAAC,UAFV;AAGE,QAAA,SAAS,MAHX;AAIE,QAAA,SAAS,EAAE6B,OAAO,CAAChC,SAJrB;AAKE,QAAA,IAAI,EAAC,QALP;AAME,QAAA,KAAK,EAAC,KANR;AAOE,QAAA,MAAM,EAAC,OAPT;AAQE,QAAA,KAAK,EAAEU,QART;AASE,QAAA,QAAQ,EAAE,KAAKC,YAAL,CAAkB,UAAlB,CATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CAhCF,CADF,CADF,EAwDE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAkB,QAAA,SAAS,EAAEqB,OAAO,CAAC9C,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,sBAAW,KAHb;AAIE,QAAA,SAAS,EAAE8C,OAAO,CAACxC,SAJrB;AAKE,QAAA,OAAO,EAAE,KAAK0B,aALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,CADF,CAxDF,EAmEGX,WAAW,CAAC0B,GAAZ,CAAgB,UAACV,CAAD,EAAIW,CAAJ,EAAU;AACzB,eACE,oBAAC,KAAD,CAAO,QAAP;AAAgB,UAAA,GAAG,EAAEA,CAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AAAM,UAAA,IAAI,MAAV;AAAW,UAAA,EAAE,EAAE,EAAf;AAAmB,UAAA,SAAS,EAAEF,OAAO,CAAC9C,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAgB,UAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AAAM,UAAA,IAAI,MAAV;AAAW,UAAA,EAAE,EAAE,CAAf;AAAkB,UAAA,EAAE,EAAE,CAAtB;AAAyB,UAAA,SAAS,EAAE8C,OAAO,CAAC9C,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,UAAD;AACE,UAAA,SAAS,EAAE8C,OAAO,CAAC7B,OADrB;AAEE,UAAA,OAAO,EAAC,YAFV;AAGE,UAAA,SAAS,EAAC,GAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAQE,oBAAC,SAAD;AACE,UAAA,QAAQ,MADV;AAEE,UAAA,EAAE,EAAC,2BAFL;AAGE,UAAA,OAAO,EAAC,UAHV;AAIE,UAAA,SAAS,MAJX;AAKE,UAAA,SAAS,EAAE6B,OAAO,CAAChC,SALrB;AAME,UAAA,KAAK,EAAC,KANR;AAOE,UAAA,IAAI,EAAC,QAPP;AAQE,UAAA,MAAM,EAAC,OART;AASE,UAAA,KAAK,EAAE,MAAI,CAAC2B,UAAL,CAAgBJ,CAAC,CAACF,KAAlB,CATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UARF,EAmBE,oBAAC,SAAD;AACE,UAAA,QAAQ,MADV;AAEE,UAAA,EAAE,EAAC,2BAFL;AAGE,UAAA,OAAO,EAAC,UAHV;AAIE,UAAA,SAAS,MAJX;AAKE,UAAA,SAAS,EAAEW,OAAO,CAAChC,SALrB;AAME,UAAA,KAAK,EAAC,KANR;AAOE,UAAA,IAAI,EAAC,QAPP;AAQE,UAAA,MAAM,EAAC,OART;AASE,UAAA,KAAK,EAAE,MAAI,CAAC+B,UAAL,CAAgBR,CAAC,CAACF,KAAlB,CATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAnBF,CADF,EAgCE,oBAAC,IAAD;AAAM,UAAA,IAAI,MAAV;AAAW,UAAA,EAAE,EAAE,CAAf;AAAkB,UAAA,EAAE,EAAE,CAAtB;AAAyB,UAAA,SAAS,EAAEW,OAAO,CAAC9C,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,UAAD;AACE,UAAA,SAAS,EAAE8C,OAAO,CAAC7B,OADrB;AAEE,UAAA,OAAO,EAAC,YAFV;AAGE,UAAA,SAAS,EAAC,GAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAQE,oBAAC,SAAD;AACE,UAAA,QAAQ,MADV;AAEE,UAAA,EAAE,EAAC,8BAFL;AAGE,UAAA,OAAO,EAAC,UAHV;AAIE,UAAA,SAAS,MAJX;AAKE,UAAA,SAAS,EAAE6B,OAAO,CAAChC,SALrB;AAME,UAAA,IAAI,EAAC,QANP;AAOE,UAAA,KAAK,EAAC,KAPR;AAQE,UAAA,MAAM,EAAC,OART;AASE,UAAA,KAAK,EAAEuB,CAAC,CAACb,QAAF,GAAa,IATtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UARF,CAhCF,CADF,CADF,EAwDE,oBAAC,IAAD;AAAM,UAAA,IAAI,MAAV;AAAW,UAAA,EAAE,EAAE,CAAf;AAAkB,UAAA,SAAS,EAAEsB,OAAO,CAAC9C,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,MAAD;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,KAAK,EAAC,SAFR;AAGE,wBAAW,KAHb;AAIE,UAAA,SAAS,EAAE8C,OAAO,CAACjC,YAJrB;AAKE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACA,YAAL,CAAkBwB,CAAC,CAACF,KAApB,CAAN;AAAA,WALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAOE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF,CADF,CAxDF,CADF;AAsED,OAvEA,CAnEH,CADF;AA8ID;;;;EAzN0BpD,S;;AA4N7BoC,cAAc,CAAC8B,SAAf,GAA2B;AACzBH,EAAAA,OAAO,EAAE9D,SAAS,CAACkE,MAAV,CAAiBC,UADD;AAEzBZ,EAAAA,cAAc,EAAEvD,SAAS,CAACoE,IAAV,CAAeD;AAFN,CAA3B;AAKA,eAAelE,UAAU,CAACa,MAAD,CAAV,CAAmBqB,cAAnB,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Typography, Grid, TextField, Button } from '@material-ui/core/';\nimport { Add as AddIcon } from '@material-ui/icons/';\nimport { Clear as ClearIcon } from '@material-ui/icons/';\nimport { reduce } from 'lodash';\n\nimport snackbar from '../../utils/snackbar';\nimport { primary, error } from '../../utils/colors';\n\nconst styles = theme => ({\n  grid: {\n    paddingTop: '5px !important',\n    paddingBottom: '5px !important',\n    display: 'flex',\n    alignItems: 'center',\n    '& div': {\n      background: 'none'\n    }\n  },\n  addMarker: {\n    background: primary.main,\n    color: primary.contrastText,\n    '&:hover': {\n      background: primary.dark\n    },\n    '&:focus': {\n      textDecoration: 'none',\n      outline: 'none'\n    }\n  },\n  removeMarker: {\n    background: error.main,\n    color: error.contrastText,\n    '&:hover': {\n      background: error.dark\n    },\n    '&:focus': {\n      textDecoration: 'none',\n      outline: 'none'\n    }\n  },\n  timeInput: {\n    width: '50%',\n    marginRight: '5px'\n  },\n  timeTxt: {\n    paddingRight: '5px'\n  }\n});\n\nclass SlotMarkupForm extends Component {\n  state = {\n    adSlotsMili: [],\n    min: '',\n    sec: '',\n    duration: ''\n  };\n\n  handleChange = key => e =>\n    this.setState({ [key]: Number(e.target.value) || 0 });\n\n  addAdSlotMili = () => {\n    const { min, sec, duration } = this.state;\n    if ((!min && !sec) || !duration) {\n      snackbar({\n        variant: 'error',\n        message: `${\n          !min && !sec\n            ? 'Please provide ad start time'\n            : 'Please provide ad duration'\n        }`\n      });\n      return;\n    }\n    let { adSlotsMili } = this.state;\n    const start = (min * 60 + sec) * 1000;\n\n    adSlotsMili = reduce(\n      adSlotsMili,\n      (result, s) => {\n        if (!(s.start === start)) {\n          result.push(s);\n          return result;\n        }\n        return result;\n      },\n      []\n    );\n\n    adSlotsMili.push({ start, duration: duration * 1000 });\n    this.setState({ adSlotsMili }, () => {\n      const { setMarkupValue } = this.props;\n      setMarkupValue({ adSlotsMili });\n    });\n  };\n\n  getMinutes = miliSec => Math.floor(miliSec / 1000 / 60);\n\n  getSeconds = miliSec => {\n    const sec = miliSec / 1000;\n    return sec - Math.floor(sec / 60) * 60;\n  };\n\n  removeMarker = start => {\n    let { adSlotsMili } = this.state;\n    adSlotsMili = reduce(\n      adSlotsMili,\n      (result, s) => {\n        if (!(s.start === start)) {\n          result.push(s);\n          return result;\n        }\n        return result;\n      },\n      []\n    );\n    this.setState({ adSlotsMili }, () => {\n      const { setMarkupValue } = this.props;\n      setMarkupValue({ adSlotsMili });\n    });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { min, sec, duration, adSlotsMili } = this.state;\n    return (\n      <React.Fragment>\n        <Grid item xs={10} className={classes.grid}>\n          <Grid container spacing={8}>\n            <Grid item xs={7} md={8} className={classes.grid}>\n              <Typography\n                className={classes.timeTxt}\n                variant=\"subheading\"\n                component=\"p\"\n              >\n                Start\n              </Typography>\n              <TextField\n                id=\"ep-markers-start-min-input\"\n                variant=\"outlined\"\n                fullWidth\n                className={classes.timeInput}\n                label=\"min\"\n                type=\"number\"\n                margin=\"dense\"\n                value={min}\n                onChange={this.handleChange('min')}\n              />\n              <TextField\n                id=\"ep-markers-start-sec-input\"\n                variant=\"outlined\"\n                fullWidth\n                className={classes.timeInput}\n                label=\"sec\"\n                type=\"number\"\n                margin=\"dense\"\n                value={sec}\n                onChange={this.handleChange('sec')}\n              />\n            </Grid>\n            <Grid item xs={5} md={4} className={classes.grid}>\n              <Typography\n                className={classes.timeTxt}\n                variant=\"subheading\"\n                component=\"p\"\n              >\n                Duration\n              </Typography>\n              <TextField\n                id=\"ep-markers-duration-sec-input\"\n                variant=\"outlined\"\n                fullWidth\n                className={classes.timeInput}\n                type=\"number\"\n                label=\"sec\"\n                margin=\"dense\"\n                value={duration}\n                onChange={this.handleChange('duration')}\n              />\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs={2} className={classes.grid}>\n          <Button\n            size=\"small\"\n            color=\"primary\"\n            aria-label=\"Add\"\n            className={classes.addMarker}\n            onClick={this.addAdSlotMili}\n          >\n            <AddIcon />\n          </Button>\n        </Grid>\n        {adSlotsMili.map((s, i) => {\n          return (\n            <React.Fragment key={i}>\n              <Grid item xs={10} className={classes.grid}>\n                <Grid container spacing={8}>\n                  <Grid item xs={7} md={8} className={classes.grid}>\n                    <Typography\n                      className={classes.timeTxt}\n                      variant=\"subheading\"\n                      component=\"p\"\n                    >\n                      Start\n                    </Typography>\n                    <TextField\n                      disabled\n                      id=\"ep-markers-start-min-show\"\n                      variant=\"outlined\"\n                      fullWidth\n                      className={classes.timeInput}\n                      label=\"min\"\n                      type=\"number\"\n                      margin=\"dense\"\n                      value={this.getMinutes(s.start)}\n                    />\n                    <TextField\n                      disabled\n                      id=\"ep-markers-start-sec-show\"\n                      variant=\"outlined\"\n                      fullWidth\n                      className={classes.timeInput}\n                      label=\"sec\"\n                      type=\"number\"\n                      margin=\"dense\"\n                      value={this.getSeconds(s.start)}\n                    />\n                  </Grid>\n                  <Grid item xs={5} md={4} className={classes.grid}>\n                    <Typography\n                      className={classes.timeTxt}\n                      variant=\"subheading\"\n                      component=\"p\"\n                    >\n                      Duration\n                    </Typography>\n                    <TextField\n                      disabled\n                      id=\"ep-markers-duration-sec-show\"\n                      variant=\"outlined\"\n                      fullWidth\n                      className={classes.timeInput}\n                      type=\"number\"\n                      label=\"sec\"\n                      margin=\"dense\"\n                      value={s.duration / 1000}\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={2} className={classes.grid}>\n                <Button\n                  size=\"small\"\n                  color=\"primary\"\n                  aria-label=\"Add\"\n                  className={classes.removeMarker}\n                  onClick={() => this.removeMarker(s.start)}\n                >\n                  <ClearIcon />\n                </Button>\n              </Grid>\n            </React.Fragment>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\nSlotMarkupForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  setMarkupValue: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(SlotMarkupForm);\n"]},"metadata":{},"sourceType":"module"}