{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pdangi/intertrust/media/test-task-media/src/containers/Stocks.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PaperMain from '../components/PaperMain';\nimport { fetchStreams, updateStream } from '../api/streams';\nimport alert from '../utils/alert';\nimport loader from '../utils/loader';\n\nvar Streams =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Streams, _Component);\n\n  function Streams() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Streams);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Streams)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.fetchStreamsData =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.onFetchData = function (state) {\n      var _this$state = _this.state,\n          pageSize = _this$state.pageSize,\n          page = _this$state.page,\n          sortBy = _this$state.sortBy;\n\n      if (pageSize !== state.pageSize || page !== state.page || JSON.stringify(state.sorted) !== JSON.stringify(sortBy)) {\n        var size = state.pageSize < 0 ? 0 : state.pageSize;\n\n        _this.setState({\n          pageSize: size,\n          page: state.page,\n          sortBy: state.sorted\n        }, function () {\n          _this.fetchStreamsData();\n        });\n      }\n    };\n\n    _this.onSearch = function (event) {\n      var search = _this.state.search;\n      var value = event.target.value;\n\n      if (search !== value) {\n        _this.setState({\n          search: value\n        },\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return _this.fetchStreamsData();\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        })));\n      }\n    };\n\n    _this.onStatusChange = function (stream) {\n      var epasso = _this.props.cookies.epasso;\n      var id = stream.id,\n          status = stream.status;\n      alert({\n        title: 'Confirm',\n        text: \"Do you really want to \".concat(status ? 'disable' : 'enable', \" this stream?\"),\n        handleSuccess: function () {\n          var _handleSuccess = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee3() {\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    loader(true);\n                    _context3.next = 3;\n                    return updateStream(epasso, id, {\n                      status: !status\n                    });\n\n                  case 3:\n                    _this.fetchStreamsData();\n\n                    setInterval(function () {\n                      loader(false);\n                    }, 2000);\n\n                  case 5:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          function handleSuccess() {\n            return _handleSuccess.apply(this, arguments);\n          }\n\n          return handleSuccess;\n        }()\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Streams, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      loader(true);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(PaperMain, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"hello\"));\n    }\n  }]);\n\n  return Streams;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps() {\n  return {};\n};\n\nvar mapDispatchToProps = function mapDispatchToProps() {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Streams);","map":{"version":3,"sources":["/Users/pdangi/intertrust/media/test-task-media/src/containers/Stocks.jsx"],"names":["React","Component","connect","PaperMain","fetchStreams","updateStream","alert","loader","Streams","fetchStreamsData","onFetchData","state","pageSize","page","sortBy","JSON","stringify","sorted","size","setState","onSearch","event","search","value","target","onStatusChange","stream","epasso","props","cookies","id","status","title","text","handleSuccess","setInterval","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport PaperMain from '../components/PaperMain';\nimport { fetchStreams, updateStream } from '../api/streams';\nimport alert from '../utils/alert';\nimport loader from '../utils/loader';\n\nclass Streams extends Component {\n  componentWillMount() {\n    loader(true);\n  }\n\n  fetchStreamsData = async () => {};\n\n  onFetchData = state => {\n    const { pageSize, page, sortBy } = this.state;\n    if (\n      pageSize !== state.pageSize ||\n      page !== state.page ||\n      JSON.stringify(state.sorted) !== JSON.stringify(sortBy)\n    ) {\n      const size = state.pageSize < 0 ? 0 : state.pageSize;\n      this.setState(\n        { pageSize: size, page: state.page, sortBy: state.sorted },\n        () => {\n          this.fetchStreamsData();\n        }\n      );\n    }\n  };\n\n  onSearch = event => {\n    const { search } = this.state;\n    const {\n      target: { value },\n    } = event;\n    if (search !== value) {\n      this.setState({ search: value }, async () => {\n        await this.fetchStreamsData();\n      });\n    }\n  };\n\n  onStatusChange = stream => {\n    const {\n      cookies: { epasso },\n    } = this.props;\n    const { id, status } = stream;\n    alert({\n      title: 'Confirm',\n      text: `Do you really want to ${\n        status ? 'disable' : 'enable'\n      } this stream?`,\n      handleSuccess: async () => {\n        loader(true);\n        await updateStream(epasso, id, { status: !status });\n        this.fetchStreamsData();\n        setInterval(() => {\n          loader(false);\n        }, 2000);\n      },\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <PaperMain>hello</PaperMain>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = () => ({});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Streams);\n"]},"metadata":{},"sourceType":"module"}