{"ast":null,"code":"import _objectSpread from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pdangi/intertrust/media/test-task-media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport snackbar from '../utils/snackbar';\nexport var fetchStocks =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return axios({\n              url: \"\".concat(configVar.API_HOST).concat(configVar.BASE_URL, \"/streams?page=\").concat(page, \"&pageSize=\").concat(pageSize, \"&orderBy=\").concat(orderBy, \"&search=\").concat(search),\n              method: 'get',\n              headers: {\n                'Content-Type': ' application/json;charset=UTF-8',\n                token: token\n              }\n            });\n\n          case 3:\n            response = _context.sent;\n            return _context.abrupt(\"return\", response.data);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            snackbar({\n              variant: 'error',\n              message: _context.t0.response.data.message || 'Error while fetching streams data.'\n            });\n\n            if (_context.t0.response.status === 401) {\n              window.location = '/login';\n            }\n\n            return _context.abrupt(\"return\", []);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n\n  return function fetchStocks() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var fetchStream =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(token, id) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return axios({\n              url: \"\".concat(configVar.API_HOST).concat(configVar.BASE_URL, \"/streams/\").concat(id),\n              method: 'get',\n              headers: {\n                'Content-Type': ' application/json;charset=UTF-8',\n                token: token\n              }\n            });\n\n          case 3:\n            response = _context2.sent;\n            return _context2.abrupt(\"return\", response);\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            return _context2.abrupt(\"return\", new Error(_context2.t0));\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n\n  return function fetchStream(_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var createStream =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(token, value) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return axios({\n              url: \"\".concat(configVar.API_HOST).concat(configVar.BASE_URL, \"/streams\"),\n              method: 'post',\n              data: _objectSpread({}, value),\n              headers: {\n                'Content-Type': ' application/json;charset=UTF-8',\n                token: token\n              }\n            });\n\n          case 3:\n            response = _context3.sent;\n            return _context3.abrupt(\"return\", response);\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            return _context3.abrupt(\"return\", new Error(_context3.t0));\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n\n  return function createStream(_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var updateStream =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(token, id, value) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return axios({\n              url: \"\".concat(configVar.API_HOST).concat(configVar.BASE_URL, \"/streams/\").concat(id),\n              method: 'patch',\n              data: _objectSpread({}, value),\n              headers: {\n                'Content-Type': ' application/json;charset=UTF-8',\n                token: token\n              }\n            });\n\n          case 3:\n            response = _context4.sent;\n            return _context4.abrupt(\"return\", response);\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            return _context4.abrupt(\"return\", new Error(_context4.t0));\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n\n  return function updateStream(_x5, _x6, _x7) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var deleteStream =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(token, id) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return axios({\n              url: \"\".concat(configVar.API_HOST).concat(configVar.BASE_URL, \"/streams/\").concat(id),\n              method: 'delete',\n              headers: {\n                'Content-Type': ' application/json;charset=UTF-8',\n                token: token\n              }\n            });\n\n          case 3:\n            response = _context5.sent;\n            return _context5.abrupt(\"return\", response);\n\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5[\"catch\"](0);\n            return _context5.abrupt(\"return\", new Error(_context5.t0));\n\n          case 10:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 7]]);\n  }));\n\n  return function deleteStream(_x8, _x9) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var validateStream =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(token, url) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            _context6.next = 3;\n            return axios({\n              url: \"\".concat(configVar.API_HOST).concat(configVar.BASE_URL, \"/streams/validate\"),\n              method: 'post',\n              data: {\n                url: url\n              },\n              headers: {\n                'Content-Type': ' application/json;charset=UTF-8',\n                token: token\n              }\n            });\n\n          case 3:\n            response = _context6.sent;\n            return _context6.abrupt(\"return\", response);\n\n          case 7:\n            _context6.prev = 7;\n            _context6.t0 = _context6[\"catch\"](0);\n            return _context6.abrupt(\"return\", new Error(_context6.t0));\n\n          case 10:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[0, 7]]);\n  }));\n\n  return function validateStream(_x10, _x11) {\n    return _ref6.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/pdangi/intertrust/media/test-task-media/src/api/stocks.js"],"names":["axios","snackbar","fetchStocks","url","configVar","API_HOST","BASE_URL","page","pageSize","orderBy","search","method","headers","token","response","data","variant","message","status","window","location","fetchStream","id","Error","createStream","value","updateStream","deleteStream","validateStream"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport snackbar from '../utils/snackbar';\n\nexport const fetchStocks = async () => {\n  try {\n    const response = await axios({\n      url: `${configVar.API_HOST}${\n        configVar.BASE_URL\n      }/streams?page=${page}&pageSize=${pageSize}&orderBy=${orderBy}&search=${search}`,\n      method: 'get',\n      headers: {\n        'Content-Type': ' application/json;charset=UTF-8',\n        token,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    snackbar({\n      variant: 'error',\n      message:\n        error.response.data.message || 'Error while fetching streams data.',\n    });\n    if (error.response.status === 401) {\n      window.location = '/login';\n    }\n    return [];\n  }\n};\n\nexport const fetchStream = async (token, id) => {\n  try {\n    const response = await axios({\n      url: `${configVar.API_HOST}${configVar.BASE_URL}/streams/${id}`,\n      method: 'get',\n      headers: {\n        'Content-Type': ' application/json;charset=UTF-8',\n        token,\n      },\n    });\n    return response;\n  } catch (error) {\n    return new Error(error);\n  }\n};\n\nexport const createStream = async (token, value) => {\n  try {\n    const response = await axios({\n      url: `${configVar.API_HOST}${configVar.BASE_URL}/streams`,\n      method: 'post',\n      data: {\n        ...value,\n      },\n      headers: {\n        'Content-Type': ' application/json;charset=UTF-8',\n        token,\n      },\n    });\n    return response;\n  } catch (error) {\n    return new Error(error);\n  }\n};\n\nexport const updateStream = async (token, id, value) => {\n  try {\n    const response = await axios({\n      url: `${configVar.API_HOST}${configVar.BASE_URL}/streams/${id}`,\n      method: 'patch',\n      data: {\n        ...value,\n      },\n      headers: {\n        'Content-Type': ' application/json;charset=UTF-8',\n        token,\n      },\n    });\n    return response;\n  } catch (error) {\n    return new Error(error);\n  }\n};\n\nexport const deleteStream = async (token, id) => {\n  try {\n    const response = await axios({\n      url: `${configVar.API_HOST}${configVar.BASE_URL}/streams/${id}`,\n      method: 'delete',\n      headers: {\n        'Content-Type': ' application/json;charset=UTF-8',\n        token,\n      },\n    });\n    return response;\n  } catch (error) {\n    return new Error(error);\n  }\n};\n\nexport const validateStream = async (token, url) => {\n  try {\n    const response = await axios({\n      url: `${configVar.API_HOST}${configVar.BASE_URL}/streams/validate`,\n      method: 'post',\n      data: {\n        url,\n      },\n      headers: {\n        'Content-Type': ' application/json;charset=UTF-8',\n        token,\n      },\n    });\n    return response;\n  } catch (error) {\n    return new Error(error);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}